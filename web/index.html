<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'; base-uri 'self'; object-src 'none'; frame-ancestors 'none'"
    />
    <title>Workflow</title>
    <link rel="icon" href="./favicon.ico" sizes="any" />
    <link rel="icon" href="./favicon-32.png" type="image/png" sizes="32x32" />
    <link rel="apple-touch-icon" href="./icon-180.png" />
    <link rel="stylesheet" href="./styles.css" />
    <link rel="stylesheet" href="./overrides.css" />
  </head>
  <body>
    <div class="titlebar">
      <div class="titlebar__controls">
        <button
          id="window-close"
          class="window-control window-control--close"
          type="button"
          aria-label="Close"
        >
          √ó
        </button>
        <button
          id="window-min"
          class="window-control window-control--min"
          type="button"
          aria-label="Minimize"
        >
          ‚Äì
        </button>
        <button
          id="window-max"
          class="window-control window-control--max"
          type="button"
          aria-label="Maximize"
        >
          ‚ñ°
        </button>
      </div>
      <div class="titlebar__brand">
        <img class="titlebar__logo" src="./assets/app-icon.svg" alt="Workflow" />
        <div class="titlebar__text">Workflow</div>
      </div>
      <div class="titlebar__spacer"></div>
    </div>
    <div class="app">
      <aside class="sidebar">
        <div class="sidebar__brand">
          <img class="brand__logo" src="./assets/app-icon.svg" alt="Workflow" />
          <div class="brand__text">
            <div class="brand__title">Workflow Tracker</div>
          </div>
        </div>
        <nav class="sidebar__nav">
          <button class="nav-item nav-item--active" data-page="dashboard">Dashboard</button>
          <button class="nav-item" data-page="database">Database</button>
        </nav>
        <div class="sidebar__spacer"></div>
        <div class="sidebar__footer">
          <button id="settings-button" class="nav-item" data-page="settings">‚öôÔ∏è Settings</button>
        </div>
      </aside>

      <main class="main">
        <section id="page-dashboard" class="page page--active">
          <header class="topbar">
            <div>
              <div class="topbar__title">Dashboard</div>
              <div class="topbar__subtitle">
                Move candidates through onboarding with a simple Kanban flow.
              </div>
            </div>
            <div class="topbar__actions">
              <button id="weekly-toggle" class="button button--primary">Weekly Tracker</button>
              <button id="todo-toggle" class="button button--primary">Todo List</button>
              <button id="add-column-header" class="button button--primary">Add Column</button>
            </div>
          </header>

          <section class="kanban">
            <div id="kanban-empty" class="kanban-empty">
              No columns yet. Add your first Kanban column to get started.
            </div>
            <div id="kanban-layout" class="kanban__layout">
              <div id="kanban-board" class="kanban__board"></div>
              <aside id="details-drawer" class="details-drawer hidden" aria-hidden="true">
                <div class="details-drawer__header">
                  <div class="details-drawer__title" id="details-drawer-name">Candidate</div>
                  <div class="details-drawer__meta">
                    <button
                      class="details-drawer__pill hidden"
                      id="details-drawer-scheduled"
                      type="button"
                    >
                      Neo Scheduled Date
                    </button>
                  </div>
                  <button
                    id="details-drawer-close"
                    class="icon-button"
                    aria-label="Close details drawer"
                  >
                    ‚úï
                  </button>
                </div>
                <div class="details-drawer__body" id="details-drawer-body"></div>
                <div class="details-drawer__footer">
                  <button
                    id="details-process"
                    class="button button--primary button--full"
                    type="button"
                  >
                    Process Candidate
                  </button>
                </div>
              </aside>
            </div>
          </section>
        </section>

        <section id="page-database" class="page">
          <header class="topbar">
            <div>
              <div class="topbar__title">Database</div>
              <div class="topbar__subtitle">View and manage stored onboarding data.</div>
            </div>
            <div class="topbar__actions topbar__actions--db">
              <div class="search search--db">
                <input
                  id="db-search"
                  type="text"
                  placeholder="Search current table..."
                  autocomplete="off"
                />
              </div>
              <button id="db-export" class="button button--primary" type="button">
                Export CSV
              </button>
              <button id="db-clear-selection" class="button button--primary" type="button" disabled>
                Clear Selection
              </button>
              <button id="db-delete" class="button button--danger" type="button" disabled>
                Delete Selected
              </button>
            </div>
          </header>
          <div class="page__body settings-body">
            <div class="card">
              <div class="db-table-wrap">
                <table id="db-table" class="data-table">
                  <thead></thead>
                  <tbody></tbody>
                </table>
              </div>
              <div class="db-footer">
                <div id="db-table-meta" class="muted">0 rows</div>
                <div class="db-pagination">
                  <button id="db-page-prev" class="button button--ghost" type="button">Prev</button>
                  <div id="db-page-info" class="db-page-info">Page 1 of 1</div>
                  <button id="db-page-next" class="button button--ghost" type="button">Next</button>
                  <select id="db-page-size" class="db-page-size">
                    <option value="25">25</option>
                    <option value="50" selected>50</option>
                    <option value="100">100</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="page-settings" class="page">
          <header class="topbar">
            <div>
              <div class="topbar__title">Settings</div>
              <div class="topbar__subtitle">Application settings and preferences.</div>
            </div>
          </header>
          <div class="page__body">
            <div class="card">
              <h3>Kanban Columns</h3>
              <div class="kanban-settings">
                <div class="kanban-settings__list" id="kanban-columns-list"></div>
                <div class="kanban-settings__actions">
                  <button id="settings-add-column" class="button button--primary" type="button">
                    Add Kanban Column
                  </button>
                  <button
                    id="settings-remove-column"
                    class="button button--danger"
                    type="button"
                    disabled
                  >
                    Remove KanBan Column
                  </button>
                  <div class="muted">Select a column to remove.</div>
                </div>
              </div>
            </div>
            <div class="card">
              <h3>Security</h3>
              <div class="field">
                <label>Program Password</label>
                <div class="setting-row">
                  <button id="change-password-button" class="button button--ghost" type="button">
                    Change password
                  </button>
                  <div class="muted">Change the program password. Current password required.</div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <aside id="weekly-panel" class="flyout hidden" aria-hidden="true">
      <div class="flyout__header">
        <div>
          <div class="flyout__title">Weekly Tracker</div>
          <div class="flyout__subtitle" id="weekly-range"></div>
          <div id="weekly-hours-pill" class="weekly-hours-pill">Total Hours: ‚Äî</div>
        </div>
        <button id="weekly-close" class="icon-button" aria-label="Close weekly tracker">‚úï</button>
      </div>
      <form id="weekly-form" class="flyout__body weekly__body"></form>
      <div class="flyout__footer">
        <button id="weekly-export" class="button button--ghost" type="button">
          Export Summary
        </button>
        <div class="flyout__actions">
          <button id="weekly-cancel" class="button button--ghost" type="button">Close</button>
          <button id="weekly-save" class="button button--primary" type="submit" form="weekly-form">
            Save Week
          </button>
        </div>
      </div>
    </aside>

    <aside id="todo-panel" class="flyout hidden" aria-hidden="true">
      <div class="flyout__header">
        <div>
          <div class="flyout__title">Todo List</div>
          <div class="flyout__subtitle">
            Track onboarding tasks and roll them into the weekly tracker.
          </div>
        </div>
        <button id="todo-close" class="icon-button" aria-label="Close todo list">‚úï</button>
      </div>
      <div class="flyout__body">
        <form id="todo-form" class="todo-panel__form">
          <input id="todo-input" type="text" placeholder="Add a todo..." autocomplete="off" />
          <button id="todo-add" class="button button--primary" type="submit">Add</button>
        </form>
        <ul id="todo-list" class="todo-panel__list"></ul>
      </div>
    </aside>

    <div id="action-result-modal" class="modal modal--alert hidden">
      <div class="modal__card modal__card--small">
        <div class="modal__header">
          <h2 id="action-result-title"></h2>
          <button id="action-result-close" class="icon-button">‚úï</button>
        </div>
        <div class="modal__body modal__body--single">
          <p id="action-result-message"></p>
        </div>
        <div class="modal__footer">
          <button id="action-result-ok" class="button button--primary" type="button">OK</button>
        </div>
      </div>
    </div>

    <div id="toast-root" class="toast-root"></div>

    <div id="auth-modal" class="modal hidden">
      <div class="modal__card modal__card--small">
        <div class="modal__header">
          <h2 id="auth-title">Sign In</h2>
          <button id="auth-close" class="icon-button">‚úï</button>
        </div>
        <form id="auth-form" class="modal__body modal__body--single" autocomplete="off">
          <div class="field">
            <label>Program Password</label>
            <input id="auth-password" type="password" required autocomplete="current-password" />
          </div>
        </form>
        <div class="modal__footer">
          <button id="auth-submit" class="button button--primary" type="submit" form="auth-form">
            Continue
          </button>
        </div>
      </div>
    </div>

    <div id="change-password-modal" class="modal hidden">
      <div class="modal__card modal__card--small">
        <div class="modal__header">
          <h2>Change Program Password</h2>
          <button id="change-password-close" class="icon-button">‚úï</button>
        </div>
        <form id="change-password-form" class="modal__body modal__body--single" autocomplete="off">
          <div class="field">
            <label>Current Password</label>
            <input id="change-current" type="password" required />
          </div>
          <div class="field">
            <label>New Password</label>
            <input id="change-new" type="password" required />
          </div>
          <div class="field">
            <label>Confirm New Password</label>
            <input id="change-confirm" type="password" required />
          </div>
        </form>
        <div class="modal__footer">
          <button
            id="change-password-submit"
            class="button button--primary"
            type="submit"
            form="change-password-form"
          >
            Change password
          </button>
        </div>
      </div>
    </div>

    <div id="add-column-modal" class="modal hidden">
      <div class="modal__card modal__card--small">
        <div class="modal__header">
          <h2>Add Kanban Column</h2>
          <button id="add-column-close" class="icon-button">‚úï</button>
        </div>
        <form id="add-column-form" class="modal__body modal__body--single" autocomplete="off">
          <div class="field">
            <input id="add-column-name" type="text" placeholder="Column Name" required />
          </div>
        </form>
        <div class="modal__footer">
          <div class="modal__actions">
            <button id="add-column-cancel" class="button button--danger" type="button">
              Cancel
            </button>
            <button
              id="add-column-submit"
              class="button button--primary"
              type="submit"
              form="add-column-form"
            >
              Add Column
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="candidate-modal" class="modal hidden">
      <div class="modal__card modal__card--wide">
        <div class="modal__header modal__header--candidate">
          <div class="modal__title-group">
            <h2 id="candidate-modal-title">Add Candidate</h2>
            <div class="modal__subtitle" id="candidate-modal-subtitle"></div>
          </div>
          <input
            id="candidate-name"
            type="text"
            placeholder="Candidate Name"
            autocomplete="off"
            form="candidate-form"
          />
          <button id="candidate-close" class="icon-button">‚úï</button>
        </div>
        <form id="candidate-form" class="modal__body modal__body--candidate" autocomplete="off">
          <div class="candidate-grid">
            <div class="candidate-column">
              <div class="modal__section">
                <input
                  id="candidate-icims"
                  type="text"
                  inputmode="numeric"
                  maxlength="12"
                  placeholder="ICIMS ID"
                />
                <input
                  id="candidate-employee"
                  type="text"
                  inputmode="numeric"
                  maxlength="12"
                  placeholder="Employee ID"
                />
              </div>
            </div>
            <div class="candidate-column">
              <div class="modal__section">
                <input
                  id="candidate-phone"
                  type="text"
                  placeholder="Phone Number"
                  inputmode="numeric"
                />
                <input id="candidate-email" type="email" placeholder="Email" />
              </div>
            </div>
            <div class="candidate-column">
              <div class="modal__section">
                <input id="candidate-job-id" type="text" placeholder="Job ID" />
                <input id="candidate-job-name" type="text" placeholder="Job Name" />
                <input id="candidate-job-location" type="text" placeholder="Location" />
                <input id="candidate-manager" type="text" placeholder="Manager" />
                <select id="candidate-branch">
                  <option value="">Branch</option>
                  <option value="Salem">Salem</option>
                  <option value="Portland">Portland</option>
                  <option value="Other">Other</option>
                </select>
                <input
                  id="candidate-branch-other"
                  type="text"
                  placeholder="Other Branch"
                  class="hidden"
                />
              </div>
            </div>
          </div>
        </form>
        <div class="modal__footer">
          <div class="modal__actions">
            <button id="candidate-cancel" class="button button--danger" type="button">
              Cancel
            </button>
            <button
              id="candidate-submit"
              class="button button--primary"
              type="submit"
              form="candidate-form"
            >
              Add Candidate
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="pii-modal" class="modal hidden">
      <div class="modal__card modal__card--wide">
        <div class="modal__header">
          <h2 id="pii-modal-title">Candidate's Personal Information</h2>
          <button id="pii-close" class="icon-button">‚úï</button>
        </div>
        <form id="pii-form" class="modal__body modal__body--pii" autocomplete="off">
          <div class="pii-grid">
            <div class="pii-column">
              <div class="pii-column__title">Pre Neo</div>
              <div class="pii-card">
                <div class="pii-card__title">Background</div>
                <select id="pii-background-provider">
                  <option value="">Background Provider</option>
                  <option value="Sterling">Sterling</option>
                  <option value="Sterling With MVR">Sterling With MVR</option>
                  <option value="Accurate">Accurate</option>
                  <option value="Accurate with MVR">Accurate with MVR</option>
                </select>
                <input
                  id="pii-background-date"
                  type="text"
                  placeholder="Cleared Date"
                  inputmode="numeric"
                  class="hidden"
                />
                <input id="pii-background-mvr" type="hidden" value="1" />
              </div>
              <div class="pii-card">
                <div class="pii-card__title">State Licensing</div>
                <select id="pii-license-type">
                  <option value="">License Type</option>
                  <option value="MA CORI">Massachusetts CORI</option>
                  <option value="NH GC">New Hampshire Guard Card</option>
                  <option value="ME GC">Maine Guard Card</option>
                </select>
                <div id="pii-license-ma" class="pii-license-section hidden">
                  <select id="pii-cori-status">
                    <option value="">CORI Status</option>
                    <option value="Required">Required</option>
                    <option value="Submitted">Submitted</option>
                    <option value="Cleared">Cleared</option>
                  </select>
                  <input
                    id="pii-cori-date"
                    type="text"
                    placeholder="CORI Date"
                    inputmode="numeric"
                  />
                </div>
                <div id="pii-license-nh" class="pii-license-section hidden">
                  <select id="pii-nh-status">
                    <option value="">NH Status</option>
                    <option value="Required">Required</option>
                    <option value="Submitted">Submitted</option>
                    <option value="Cleared">Cleared</option>
                  </select>
                  <input
                    id="pii-nh-expiration"
                    type="text"
                    placeholder="NH Expiration Date"
                    inputmode="numeric"
                  />
                  <input
                    id="pii-nh-id"
                    type="text"
                    placeholder="NH GC ID Number"
                    inputmode="numeric"
                  />
                </div>
                <div id="pii-license-me" class="pii-license-section hidden">
                  <select id="pii-me-status">
                    <option value="">ME Status</option>
                    <option value="Required">Required</option>
                    <option value="Submitted">Submitted</option>
                    <option value="Cleared">Cleared</option>
                  </select>
                  <input
                    id="pii-me-expiration"
                    type="text"
                    placeholder="ME Expiration Date"
                    inputmode="numeric"
                  />
                </div>
              </div>
            </div>

            <div class="pii-column">
              <div class="pii-column__title">At Neo</div>
              <div class="pii-card">
                <div class="pii-card__title">Bank Information</div>
                <input id="pii-bank-name" type="text" placeholder="Bank Name" />
                <select id="pii-account-type">
                  <option value="">Account Type</option>
                  <option value="Checking">Checking</option>
                  <option value="Savings">Savings</option>
                </select>
                <input
                  id="pii-routing"
                  type="text"
                  placeholder="Routing Number"
                  inputmode="numeric"
                />
                <input
                  id="pii-account"
                  type="text"
                  placeholder="Account Number"
                  inputmode="numeric"
                />
              </div>
              <div class="pii-card">
                <div class="pii-card__title">Uniforms</div>
                <input id="pii-shirt" type="text" placeholder="Shirt Size" />
                <input id="pii-pants" type="text" placeholder="Pants Size" />
                <input id="pii-boots" type="text" placeholder="Boots Size" />
              </div>
              <div class="pii-card">
                <div class="pii-card__title">Emergency Contact</div>
                <input id="pii-emergency-name" type="text" placeholder="Emergency Contact Name" />
                <input id="pii-emergency-relationship" type="text" placeholder="Relationship" />
                <input
                  id="pii-emergency-phone"
                  type="text"
                  placeholder="Emergency Contact Phone"
                  inputmode="numeric"
                />
              </div>
            </div>

            <div class="pii-column">
              <div class="pii-column__title">Post Neo</div>
              <div class="pii-card">
                <div class="pii-card__title">Identification</div>
                <select id="pii-id-type">
                  <option value="">ID Type</option>
                  <option value="Driver's License">Driver's License</option>
                  <option value="State ID">State ID</option>
                  <option value="Passport">Passport</option>
                  <option value="Military ID">Military ID</option>
                  <option value="Other">Other</option>
                </select>
                <input
                  id="pii-id-other-type"
                  type="text"
                  placeholder="Other ID Type"
                  maxlength="24"
                  class="hidden"
                />
                <div id="pii-id-row" class="pii-row hidden">
                  <input
                    id="pii-id-state"
                    type="text"
                    placeholder="State"
                    maxlength="2"
                    class="pii-input--short"
                  />
                  <input id="pii-id-number" type="text" placeholder="ID Number" maxlength="20" />
                </div>
                <div id="pii-id-dates" class="pii-row hidden">
                  <input id="pii-id-dob" type="text" placeholder="DOB" inputmode="numeric" />
                  <input id="pii-id-exp" type="text" placeholder="EXP" inputmode="numeric" />
                </div>
                <input
                  id="pii-social"
                  type="text"
                  placeholder="Social (###-##-####)"
                  inputmode="numeric"
                  maxlength="11"
                  class="hidden"
                />
              </div>
              <div class="pii-card">
                <div class="pii-card__title">Additional Details</div>
                <textarea id="pii-additional-details" placeholder="Additional Details"></textarea>
              </div>
            </div>
          </div>
        </form>
        <div class="modal__footer">
          <div class="modal__actions">
            <button id="pii-cancel" class="button button--danger" type="button">Cancel</button>
            <button id="pii-submit" class="button button--primary" type="submit" form="pii-form">
              Save PII
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="neo-date-modal" class="modal hidden">
      <div class="modal__card modal__card--small">
        <div class="modal__header">
          <h2>Neo Scheduled Date</h2>
          <button id="neo-date-close" class="icon-button">‚úï</button>
        </div>
        <form id="neo-date-form" class="modal__body modal__body--single" autocomplete="off">
          <div class="modal__section">
            <div class="date-input-group">
              <input
                id="neo-date-input"
                type="text"
                inputmode="numeric"
                maxlength="10"
                placeholder="MM/DD/YYYY"
              />
              <button
                id="neo-date-picker-button"
                class="date-picker-button"
                type="button"
                aria-label="Pick date"
              >
                üìÖ
              </button>
              <input
                id="neo-date-picker"
                class="date-picker-hidden"
                type="date"
                aria-hidden="true"
                tabindex="-1"
              />
            </div>
          </div>
        </form>
        <div class="modal__footer">
          <div class="modal__actions">
            <button id="neo-date-cancel" class="button button--danger" type="button">Cancel</button>
            <button
              id="neo-date-save"
              class="button button--primary"
              type="submit"
              form="neo-date-form"
            >
              Save Date
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="process-modal" class="modal hidden">
      <div class="modal__card modal__card--small">
        <div class="modal__header">
          <h2>Pass Candidate</h2>
          <button id="process-close" class="icon-button">‚úï</button>
        </div>
        <div class="modal__body modal__body--single">
          <div class="process-card">
            <div class="process-grid">
              <div class="field">
                <label>Arrival Time</label>
                <input
                  id="process-arrival"
                  type="text"
                  inputmode="numeric"
                  maxlength="4"
                  placeholder="24H"
                />
              </div>
              <div class="field">
                <label>Departure Time</label>
                <input
                  id="process-departure"
                  type="text"
                  inputmode="numeric"
                  maxlength="4"
                  placeholder="24H"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="modal__footer">
          <div class="modal__actions">
            <button id="process-confirm" class="button button--primary" type="button">
              Process Candidate
            </button>
            <button id="process-remove" class="button button--danger" type="button">
              Remove Candidate
            </button>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="./app.js"></script>
  </body>
</html>
